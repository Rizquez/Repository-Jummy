import{_ as b}from"./logo-jummy-CBtbNno0.js";import{_ as h,e as l,c as _,a,b as d,u,o as w,i as S}from"./index-D73NRxAB.js";import{A as x,f as c}from"./utils-CQI9Zwo-.js";import{F as C}from"./Footer-ByYSq2Vq.js";const O={class:"container-general"},T={class:"button-container"},M={__name:"CompanyMenuView",setup(N){const{isAuthenticated:j,user:m,isLoading:k}=u(),r=m.value.name,i=S(),t=l(""),o=l(!1),{logout:p}=u(),v=()=>{sessionStorage.clear(),p({returnTo:window.location.origin})},f=()=>{o.value=!1,window.location.reload()};async function g(){try{const e=await c("https://api-jummy.onrender.com/find-dishes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})},1e4);if(e.ok){const n=(await e.json()).data;sessionStorage.setItem("platos",JSON.stringify(n)),sessionStorage.setItem("email",r),i.push({name:"company-edit-menu"})}else e.status===500?(t.value="No se han podido obtener los datos solicitados sobre los platos",o.value=!0):(t.value=`Error inesperado en el servidor
${e.statusText} 🛠️`,o.value=!0)}catch(e){t.value=e.message.includes("tiempo de espera")?"La solicitud ha excedido el tiempo de espera. Por favor, intentelo de nuevo mas tarde":"Error inesperado durante la solicitud",o.value=!0}}async function y(){try{const e=await c("https://api-jummy.onrender.com/get-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email_restaurante:r})},1e4);if(e.status===200){const n=(await e.json()).data;sessionStorage.setItem("allOrdersCompany",JSON.stringify(n)),i.push({name:"company-orders",query:{reload:Date.now()}})}else e.status===500?(t.value="No se han podido obtener el resumen de los pedidos",o.value=!0):(t.value=`Error inesperado en el servidor
${e.statusText} 🛠️`,o.value=!0)}catch(e){t.value=e.message.includes("tiempo de espera")?"La solicitud ha excedido el tiempo de espera. Por favor, intentelo de nuevo más tarde":"Error inesperado durante la solicitud",o.value=!0}}return(e,s)=>(w(),_("main",null,[a("div",{class:"btn-volver-container"},[a("p",{class:"boton-salir txt-1-5vw",onClick:v},"Salir")]),a("div",O,[s[2]||(s[2]=a("img",{src:b,alt:"Logo Jummy"},null,-1)),a("div",T,[a("button",{onClick:s[0]||(s[0]=n=>g()),class:"btn-loggin txt-2vw"},"Modificar carta"),a("button",{onClick:s[1]||(s[1]=n=>y()),class:"btn-loggin txt-2vw"},"Lista de pedidos")])]),d(C),d(x,{message:t.value,visible:o.value,onClose:f},null,8,["message","visible"])]))}},A=h(M,[["__scopeId","data-v-e6f694b1"]]);export{A as default};
